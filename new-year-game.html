<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Year's Game | Almanion</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2><a href="index.html" style="color: white; text-decoration: none;">üìö –ì–ª–∞–≤–Ω–∞—è</a></h2>
            <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
            <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>
            <button class="close-sidebar" id="closeSidebar">‚úï</button>
        </div>
        
        <nav class="nav-menu">
            <div class="nav-section">
                <h3>New Year's Game</h3>
                <ul>
                    <li><a href="#game-log" class="nav-link active">–õ–æ–≥ –∏–≥—Ä—ã</a></li>
                </ul>
            </div>
            
            <div class="nav-section other-subjects">
                <h3>–î—Ä—É–≥–∏–µ —Ä–∞–∑–¥–µ–ª—ã</h3>
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="physics.html">–§–∏–∑–∏–∫–∞ 9 –∫–ª–∞—Å—Å</a></li>
                    <li><a href="matcenter.html">–ú–∞—Ç–¶–µ–Ω—Ç—Ä</a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
    <button class="menu-toggle" id="menuToggle">‚ò∞</button>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="main-content">
        <header class="page-header">
            <h1>üéÆ New Year's Game</h1>
            <p class="subtitle"><a href="https://t.me/Almanion239" target="_blank" style="color: white; text-decoration: none; font-weight: 600;">@Almanion239</a> | 2025</p>
        </header>

        <!-- –õ–æ–≥ –∏–≥—Ä—ã -->
        <section class="content-section" id="game-log">
            <h2 class="part-title">–õ–æ–≥ –∏–≥—Ä—ã</h2>
            <div style="background: var(--bg-secondary); border-radius: var(--border-radius); padding: 2rem; margin: 2rem 0; box-shadow: var(--shadow-md);">
                <div id="loadingMessage" style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–∞ –∏–≥—Ä—ã...</p>
                </div>
                <div id="errorMessage" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: var(--border-radius); padding: 1rem; color: #ef4444; margin: 1rem 0; display: none;"></div>
                <pre id="gameLogContent" style="background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 1.5rem; font-family: 'Courier New', 'Consolas', monospace; font-size: 0.9rem; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word; overflow-x: auto; max-height: 70vh; overflow-y: auto; color: var(--text-primary); display: none;"></pre>
                <div style="text-align: center; margin-top: 1rem;">
                    <button id="refreshButton" style="background: var(--accent-color); color: white; border: none; border-radius: var(--border-radius); padding: 0.75rem 1.5rem; font-size: 1rem; cursor: pointer; transition: var(--transition); display: none;">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–≤–µ—Ä—Ö" -->
    <button class="scroll-to-top" id="scrollToTop">‚Üë</button>

    <script src="script.js"></script>
    <script>
        const GAME_LOG_URL = 'https://olymp.sch239.net/game-log.txt';

        async function loadGameLog() {
            const loadingMessage = document.getElementById('loadingMessage');
            const errorMessage = document.getElementById('errorMessage');
            const gameLogContent = document.getElementById('gameLogContent');
            const refreshButton = document.getElementById('refreshButton');

            try {
                loadingMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                gameLogContent.style.display = 'none';
                refreshButton.style.display = 'none';

                const response = await fetch(GAME_LOG_URL);
                
                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${response.status} ${response.statusText}`);
                }

                const text = await response.text();
                
                // –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
                const lines = text.split('\n').filter(line => line.trim());
                const reversedLines = lines.reverse();
                const reversedText = reversedLines.join('\n');

                gameLogContent.textContent = reversedText;
                gameLogContent.style.display = 'block';
                refreshButton.style.display = 'inline-block';
                loadingMessage.style.display = 'none';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–∞:', error);
                errorMessage.textContent = `–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–≥ –∏–≥—Ä—ã: ${error.message}`;
                errorMessage.style.display = 'block';
                loadingMessage.style.display = 'none';
                refreshButton.style.display = 'inline-block';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.addEventListener('DOMContentLoaded', () => {
            loadGameLog();
            
            const refreshButton = document.getElementById('refreshButton');
            if (refreshButton) {
                refreshButton.addEventListener('click', loadGameLog);
                refreshButton.addEventListener('mouseenter', () => {
                    refreshButton.style.transform = 'translateY(-2px)';
                    refreshButton.style.boxShadow = '0 4px 12px rgba(37, 99, 235, 0.3)';
                });
                refreshButton.addEventListener('mouseleave', () => {
                    refreshButton.style.transform = '';
                    refreshButton.style.boxShadow = '';
                });
            }
        });
    </script>
</body>
</html>
